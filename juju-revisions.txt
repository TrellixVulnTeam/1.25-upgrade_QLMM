juju1
 - copied from 090baf5631f8c989547dfd741ee71fa1f33c02bd with additional edits
 for migration

juju2
 - copied from 2bd12246271899c9dc69aa684b46064d83be0308 (juju-2.2.2)
